define("components/requirejs-text/text!template/module/appcenter/index.tpl.html",[],function(){return'<section class="m-appcenter">\r\n  <div class="title">\r\n    <span class="target j-targetToMain"><i class="iconfont iconbackup"></i></span>\r\n    <span class="j-desc">{{i18n "appcenter/my_app"}}</span>\r\n  </div>\r\n\r\n  <div class="content">\r\n    <div class="group group-sys">\r\n      <div class="group-desc">\r\n        <i class="iconfont iconsystemapp"></i>\r\n        <span>{{i18n "appcenter/sys_app"}}</span>\r\n      </div>\r\n      <ul class="group-list j-sys-list"></ul>\r\n    </div>\r\n\r\n    <div class="group group-intg">\r\n      <div class="group-desc">\r\n        <i class="iconfont iconotherapp"></i>\r\n        <span>{{i18n "appcenter/intg_app"}}</span>\r\n      </div>\r\n      <ul class="group-list j-intg-list"></ul>\r\n    </div>\r\n\r\n    <div class="group group-cloud">\r\n      <div class="group-desc">\r\n        <i class="iconfont iconspreadapp"></i>\r\n        <span>{{i18n "appcenter/cloud_app"}}</span>\r\n      </div>\r\n      <ul class="group-list j-cloud-list"></ul>\r\n    </div>\r\n  </div>\r\n\r\n  <div class="cloud-container j-cloud-app">\r\n    <iframe src="" width="100%" height="100%" frameborder="0"></iframe>\r\n  </div>\r\n\r\n  {{#raw}}\r\n  <script type="text/x-handlebar-template" id="listItemsTpl">\r\n    [[#each .]]\r\n    <li class="list-item j-list-item">\r\n        <a href="javascript:void(0)" data-label="[[label]]" data-module="[[id]]" data-dismode="[[disMode]]" data-url="[[url]]" data-features="[[features]]">\r\n          <i class="icon-app iconfont [[#if icon]] [[icon]] [[else]] [[#unless background]]iconunknownapp [[/unless]] [[/if]]"\r\n             [[#if background]] style="background:[[background]]" [[/if]]></i>\r\n          <span class="list-item-label">\r\n            [[label]]\r\n          </span>\r\n        </a>\r\n    </li>\r\n    [[/each]]\r\n  </script>\r\n  {{/raw}}\r\n</section>\r\n\r\n'}),define("module/appcenter/index",["require","util/i18n!appcenter","jquery","cui/core/view/view","cui/core/view/viewmanager","cui/util/templatable/templatable","module/common/globalService","../../util/index","text!template/module/appcenter/index.tpl.html"],function(e){e("util/i18n!appcenter");var n=e("jquery"),i=e("cui/core/view/view"),t=e("cui/core/view/viewmanager"),a=e("cui/util/templatable/templatable"),s=e("module/common/globalService"),r=e("../../util/index"),l=i.extend({Implements:a,events:{"click .j-list-item":"_handleTrigger","click .j-targetToMain":"_handleTargetToMain"},attrs:{className:"",frameMode:null},Statics:{DEFAULT_TITLE:r.i18n.t("appcenter/my_app"),SYS_APPS:[{id:"logs",label:r.i18n.t("main.Service"),disMode:"inner",icon:"iconsreachm"},{id:"skins",label:r.i18n.t("main/SkinCentre"),disMode:"inner",background:"#5a81ef",icon:"icontie"}]},setup:function(){var e=this;e.model={sysApps:l.SYS_APPS,litgApps:function(){var e=s.getConfig("appcenter.externallinks")||[];return n.each(e,function(e,n){n.background&&(n.background='url("'+n.background+'")')}),s.getConfig("appcenter.enableaq")&&e.push({disMode:"newWin",id:"aq",label:r.i18n.t("main/appname_AQ"),url:"/archadm/~"+s.getSid()+"/~personal/archqry/index_archqry.jsp",icon:"iconsreachm"}),e}()}},render:function(){var e=this;l.superclass.render.call(this),e.element.hide(),n.notify.loading(),e._getAppList().then(function(i){n.each(i,function(e,n){n.logo?(n.background='url("data:image/jpg;base64,'+n.logo+'")',n.icon=""):n.icon="iconunknownapp",n.label=n.name,n.url=n.appUrl,n.disMode="newWin"}),e.model.cloudApps=i||[],e._render(),e._initView()},function(){e.model.cloudApps=[],e._render(),e._initView()})},destroy:function(){l.superclass.destroy.call(this)},_render:function(){this.element.show(),n.notify.loading("hide"),this.$(".j-sys-list").html(this.compile(this.$("#listItemsTpl").html(),this.model.sysApps)),this.$(".j-intg-list").html(this.compile(this.$("#listItemsTpl").html(),this.model.litgApps)),this.$(".j-cloud-list").html(this.compile(this.$("#listItemsTpl").html(),this.model.cloudApps))},_handleTrigger:function(e){var i=e.target||e.srcElement,t=n(i).closest("a"),a=t.data("dismode"),s=t.data("label");switch(a){case"inner":this.sendMessage("dispatcher","history:add",{module:t.data("module"),param:{}});break;case"mainFrame":this.set("frameMode",{title:s,url:t.data("url")});break;case"newWin":window.open(t.data("url"));break;case"popWin":window.open(t.data("url"),"",t.data("features"))}},_initView:function(){var e=this;0===e.model.sysApps.length?e.element.addClass("appcenter-sys-hidden"):n.noop(),0===e.model.litgApps.length?e.element.addClass("appcenter-intg-hidden"):n.noop(),0===e.model.cloudApps.length?e.element.addClass("appcenter-cloud-hidden"):n.noop()},_handleTargetToMain:function(e){this.set("frameMode",null)},_onRenderFrameMode:function(e){e?(this.$(".j-desc").text(e.title),this.$(".j-cloud-app iframe").attr("height",this.element.height()),this.$(".j-cloud-app iframe").attr("src",e.url),this.element.addClass("appcenter-iframe-mode")):(this.$(".j-desc").text(l.DEFAULT_TITLE),this.$(".j-cloud-app iframe").attr("src",""),this.element.removeClass("appcenter-iframe-mode"))},_getAppList:function(){var e=n.Deferred();return r.xhr.simpleCall({url:r.xhr.getRequestURL({url:"/XT5/jsp/appcenter.jsp",query:{func:"getCloudAppList",sid:s.getSid()}})},function(n){e.resolve(n)},function(n){e.reject(n)}),e.promise()}});t.module({name:"appcenter",template:e("text!template/module/appcenter/index.tpl.html")},l)});
//# sourceMappingURL=index.js.map